# vim:set ft=sh:

# __カレントディレクトリを返すデフォルト引数
function _lib_currentOr() {
 if [ -z $1 ];then
  echo .
 else
  echo $1
 fi
}

function _lib_cutlen() {
 echo `expr $#1 + 2`
}

# __指定パスのファイルを表示して絞り込む
function _lib_ffind() {
 echo `_lib_find $1 f`
}

# __指定パスのディレクトリを表示して絞り込む
function _lib_dfind() {
 echo `_lib_find $1 d`
}

# .いらん
function _lib_find() {
 local ROOT=$1
 local LEN=`_lib_cutlen $ROOT`
 local TYPE=$2
 echo `find $ROOT -type $TYPE -maxdepth 1 | cut -c$LEN- | percol --match-method regex`
}

function _lib_recffind() {
 echo `_lib_recfind $1 f`
}

function _lib_recdfind() {
 echo `_lib_recfind $1 d`
}

# __指定パスのディレクトリを再帰的に表示して絞り込む
function _lib_recfind() {
 local ROOT=$1
 local LEN=`_lib_cutlen $ROOT`
 local TYPE=$2
 echo `find $ROOT -name .git -prune -or -name .svn -prune -or -name .vagrant -prune -or -name Library -prune -or -type $TYPE | cut -c$LEN- | percol --match-method regex`
}
