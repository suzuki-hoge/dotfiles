" vim:set ft=vim:

"source $pete/pete/Python

augroup autocmdFrank
	autocmd!
augroup END

autocmd autocmdFrank FocusLost *.frank :call CloseAll()
autocmd autocmdFrank TabLeave  *.frank :call CloseAll()

function! FlexibleFrank(...)

let path1 = '.'
let path2 = ''

let i = 0
for var in a:000
	if i == 0
		let path1 = var
	elseif i == 1
		let path2 = var
	else
		throw "too many arguments."
	endif
	let i += 1
endfor

python <<EOM

import vim

#Tab.expandTab('frank1.frank', 'frank2.frank', 'frank3.frank')
#Tab.switchTab('frank1.frank')

adjustEndSlash = lambda path : path if path[-1] == '/' else path + '/'
getOrNone = lambda path : None if path == '' else adjustEndSlash(path)

path1 = adjustEndSlash(vim.eval('path1'))
path2 = getOrNone(vim.eval('path2'))

frank = Frank(path1)
frank.dump()

EOM
endfunction

function! CloseAll()
python <<EOM
vim.command('bdelete!')
vim.command('bdelete!')
vim.command('bdelete!')
EOM
endfunction
