" vim:set ft=vim:

augroup autocmdFrank
	autocmd!
augroup END

autocmd autocmdFrank BufEnter  *.frank call KeyMapping()
autocmd autocmdFrank BufEnter  *.frank set filetype=frank

function! FlexibleFrank(...)

let path1 = '.'
let path2 = ''

let i = 0
for var in a:000
	if i == 0
		let path1 = var
	elseif i == 1
		let path2 = var
	else
		throw "too many arguments."
	endif
	let i += 1
endfor

python <<EOM

import vim

convertFullpath = lambda p: os.path.abspath(os.path.join(vim.eval('getcwd()'), vim.eval(p)))
isNotEmpty = lambda p: vim.eval(p)

path1 = convertFullpath('path1')
path2 = convertFullpath('path2') if isNotEmpty('path2') else None

pathStacks = []
pathStacks.append(path1)

Tab.expand()

frank = Frank(path1)
frank.output()

EOM
endfunction
