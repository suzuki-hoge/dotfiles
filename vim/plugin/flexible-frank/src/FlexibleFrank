" vim:set ft=vim:

augroup autocmdFrank
	autocmd!
augroup END

autocmd autocmdFrank BufEnter  *.frank call KeyMapping()
autocmd autocmdFrank BufEnter  *.frank set filetype=frank

function! FlexibleFrank(...)

let path1 = '.'
let path2 = ''

let i = 0
for var in a:000
	if i == 0
		let path1 = var
	elseif i == 1
		let path2 = var
	else
		throw "too many arguments."
	endif
	let i += 1
endfor

python <<EOM

import vim

pathStacks = []

frank1 = vim.eval('$_frank_frank1')
frank2 = vim.eval('$_frank_frank2')
frank3 = vim.eval('$_frank_frank3')

Tab.expandTab(frank1, frank2, frank3)
Tab.switchTab(frank1)

adjustEndSlash = lambda path : path if path[-1] == '/' else path + '/'
getOrNone = lambda path : None if path == '' else adjustEndSlash(path)

path1 = adjustEndSlash(vim.eval('path1'))
path2 = getOrNone(vim.eval('path2'))

pathStacks.append(path1)

frank = Frank(path1)
frank.output()

EOM
endfunction
