" vim:set ft=vim:

python <<EOM

class Directory(Entry):

	def __init__(self, root, path):
		Entry.__init__(self, root, path)
		self.type = Type(Type.DIR)
		self.entries = self.getEntries(root)

	def getEntries(self, root):
		entries = []
		for subpath in self.path.getSubpaths():
			if subpath.isDir():
				entries.append(Directory(root, subpath))
			else:
				entries.append(File(root, subpath))

		return entries

	def createOutput(self):
		return '%s %s%s%s%s' % (self.fold.getPartOfOutputAtDir(), self.point.getPartOfOutput(), self.depth.getPartOfOutput(), self.path.getPartOfOutput(), self.type.getPartOfOutputAtDir())

	def getOutputs(self, result):
		result.append(self.createOutput())
		if not self.fold.isOn():
			[e.getOutputs(result) for e in self.entries]
		return result

	def pointOn(self, target):
		if self.num.isTarget(target):
			self.point.on()
		else:
			[e.pointOn(target) for e in self.entries]

	def pointOff(self, target):
		if self.num.isTarget(target):
			self.point.off()
		else:
			[e.pointOff(target) for e in self.entries]

	def foldOn(self, target):
		if self.num.isTarget(target):
			self.fold.on()
		else:
			[e.foldOn(target) for e in self.entries]

	def foldOff(self, target):
		if self.num.isTarget(target):
			self.fold.off()
		else:
			[e.foldOff(target) for e in self.entries]

	def recFoldOn(self, target):
		if self.num.isTarget(target):
			self._recFoldOn()
		else:
			[e.recFoldOn(target) for e in self.entries]

	def _recFoldOn(self):
		self.fold.on()
		[e._recFoldOn() for e in self.entries]

	def numbering(self):
		self.num = Num()
		if not self.fold.isOn():
			[e.numbering() for e in self.entries]

EOM
