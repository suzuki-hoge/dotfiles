" vim:set ft=vim:
python <<EOM

def FindOneByCursor(func):
	def _FindOneByCursor():
		global e
		e = frank.findOneByCursor()
		func()
	return _FindOneByCursor

def Output(func):
	def _Output():
		func()
		frank.output()
	return _Output

def ReNumbering(func):
	def _ReNumbering():
		func()
		frank.reNumbering()
	return _ReNumbering

def RestoreCursor(func):
	def _RestoreCursor():
		pos = Cursor.getPos()
		func()
		Cursor.setPos(pos)
	return _RestoreCursor

def ForbiddenTarget(*targets):
	def _wrapper(func):
		def __wrapper():
			e = frank.findOneByCursor()
			try:
				[checker(e) for checker in targets]

			except Exception, exp:
				print exp

			else:
				func()

		return __wrapper
	return _wrapper

#def forbiddenMode(*modes):
#	e = 'normal'

#	def _wrapper(func):
#		def __wrapper():
#			try:
#				[checker(e, func) for checker in modes]

#			except Exception, exp:
#				print exp

#			else:
#				func()
#		return __wrapper
#	return _wrapper

EOM
